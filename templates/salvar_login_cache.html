{% extends "base.html" %}

{% block title %}Salvando Login - Clube QZ{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="text-center">
            <div class="mb-4">
                <i class="fas fa-check-circle fa-4x text-success"></i>
            </div>
            <h2 class="text-success mb-3">Login Realizado!</h2>
            <p class="text-muted mb-4">Salvando suas informações para próxima visita...</p>
            
            <div class="spinner-border text-danger mb-4" role="status">
                <span class="visually-hidden">Carregando...</span>
            </div>
            
            <p class="text-muted small">Redirecionando para o dashboard...</p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Salvar dados no localStorage
    const cpf = '{{ cpf }}';
    const telefone = '{{ telefone }}';
    const nome = '{{ nome }}';
    const dataNascimento = '{{ data_nascimento }}';
    
    if (cpf && telefone) {
        localStorage.setItem('clube_qz_cpf', cpf);
        localStorage.setItem('clube_qz_telefone', telefone);
        localStorage.setItem('clube_qz_nome', nome);
        localStorage.setItem('clube_qz_data_nascimento', dataNascimento);
        
        console.log('Dados de login salvos no cache');
    }
    
    // Redirecionar após 2 segundos
    setTimeout(function() {
        window.location.href = '{{ url_for("dashboard.dashboard") }}';
    }, 2000);
});
</script>
{% endblock %}